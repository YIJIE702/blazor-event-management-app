@page "/event/{Id:int}"
@using EventEase.Shared.Models
@inject HttpClient Http
@inject NavigationManager Nav

<Shared.NavMenu />
<div class="container">
    <h3>Event Details</h3>

    @if (Model is null)
    {
        <p>Loading...</p>
    }
    else
    {
        <Components.EventCard Event="Model" Editable="true" />
    }
</div>

@code {
    [Parameter] public int Id { get; set; }
    private EventModel? Model;

    protected override async Task OnInitializedAsync()
    {
        Model = await Http.GetFromJsonAsync<EventModel>($"/api/events/{Id}");
        if (Model is null)
        {
            Nav.NavigateTo("/notfound");
        }
    }
}
